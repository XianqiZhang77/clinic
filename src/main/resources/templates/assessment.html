<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Self-Assessment </title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" )>
    <link rel="shortcut icon" href="pictures/favicon.ico" type="image/x-icon"/>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500&display=swap" rel="stylesheet">
    <style type="text/css">

        body {
            background: url("pictures/patient.png") no-repeat;
            background-size: 100%;
        }

        #logo {
            width: 60px;
            height: 60px;
            margin: 10px;
        }

        #title {
            font-size: 20px;
            color: #122b40;
        }

        #ntc{
            margin-left: 2%;
        }

        #sidebar-wrapper {
            font-family: 'Montserrat', sans-serif;
            background: transparent;
            font-size: 2.5rem;
            border: 0px;
            margin-left: 70px;
            margin-top: 50px;
            width: 400px;
        }

        .container {
            margin-top: 20px;
            width: 940px;
            height: 800px;
            background-color: rgba(255, 255, 255, 0.5);
            font-size: 20px;

        }

        .container-fluid {
            margin-top: 20px;
            margin-left: 10px;
        }


        .btn {
            width: 200px;
            height: 40px;
            font-size: 18px;
            margin-left: 50px;
        }

        .question_choice{
            margin-top: 30px;
            margin-left: 20px;
            margin-bottom: 20px;
        }
        #submit{
            margin-top: 0px;
            margin-left: 600px;
            margin-bottom: 20px;
        }
        .question{
            margin-left: 30px;
        }
        #top{
            font-size: 25px;
            text-align: center;
        }

        .notice {
            display: none;
            position: absolute;
            top: 20%;
            left: 30%;
            width: 35%;
            height: 40%;
            border: 16px solid lightblue;
            background-color: lightcyan;
            z-index:1002;
            overflow: auto;
            font-size: 20px;
        }

        #success{
            margin-left: 10%;
            font-size: 25px;
            text-align: center;
        }

        .notice_content{
            margin-left: 10%;
        }

        #closeNotice{
            margin-left: 30%;
        }

    </style>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
</head>

<body>

<!--logo and name-->
<div class="container-fluid">
    <img id="logo" src="pictures/logo.png">
    <span id="title"> COVID-19 Symptom Self-Assessment Center</span>
</div>

<!--Nav bar-->
<div class="col-lg-2 container-fluid dashboard">
    <nav class="navbar navbar-inverse" id="sidebar-wrapper" role="navigation">
        <ul class="nav sidebar-nav">
            <li>
                <a href="assessment" disabled="" style="color: darkgray"> Self-Assessment</a>
            </li>
            <li>
                <a href="assessmentResult"> Self-Assessment Results</a>
            </li>
            <li>
                <a href="patient_appointment" > My Appointments</a>
            </li>
            <li>
                <a href="index"> Log out</a>
            </li>
        </ul>
    </nav>
</div>


<!--Body Page-->
<div class="container" style="overflow: auto" >

   <br> <div id="top" >COVID-19 Symptom Self-Assessment</div><br>

    <!-- Question 1 -->
    <div class="question1 question">
        <br>
        Please choose your age range:<br>
        <div class="question_choice" style="margin-top: 30px" id="question1Choice">
        <button class="btn btn-info" id="under5" type="button" onclick="switchItem2_1('question2_under5')"> 6 months - 5 years</button>
        <button class="btn btn-info" id="above6" type="button" onclick="switchItem2_2('question2_above6')"> 6 - 17 years</button>
        <button class="btn btn-info" id="above18" type="button" onclick="switchItem2_3('question2_above18')"> 18 years+</button>
        </div>
    </div>

    <!-- Question 2 -->
    <div class="question2 question" style="display: none" id="question2_under5">
        <br>
        Is your child experiencing ANY of the following symptoms?<br><br>
        - Fever (38.5°C rectal temperature (101.3 °F) or higher)<br>
        - Cough (new or worse), shortness of breath, or difficulty breathing<br>
        - Runny nose or nasal congestion or sore throat<br>
        AND<br>
        fever (38.1°C rectal temperature (100.6°F) or higher)<br>
        - Abdominal pain, vomiting, or diarrhea<br>
        AND<br>
        fever (38.1°C rectal temperature (100.6°F) or higher)
    </div>

    <div class="question2 question" style="display: none" id="question2_above6">
        <br>
        Does your child have ANY of the following symptoms?<br><br>
        - Fever (oral temperature 38.1°C (100.6°F) or higher)<br>
        - Sudden loss of sense of smell (anosmia) without nasal congestion, with or without loss of taste<br>
        - Recent cough or worsening of a chronic cough<br>
        - Shortness of breath<br>
        - Trouble breathing<br>
        - Sore throat<br>
        - Runny nose or congestion (of unknown cause)
    </div>

    <div class="question2 question" style="display: none" id="question2_above18">
        <br>
        Are you experiencing ANY of the following symptoms?<br><br>
        - Fever (oral temperature 38.1°C (100.6°F) or higher)<br>
        - Sudden loss of sense of smell (anosmia) without nasal congestion, with or without loss of taste<br>
        - Recent cough or worsening of a chronic cough<br>
        - Shortness of breath<br>
        - Trouble breathing<br>
        - Sore throat<br>
        - Runny nose or congestion (of unknown cause)
    </div>

    <div class="question_choice" style="display: none" id="question2_answer">
        <button class="btn btn-info" id="yes_question2" type="button" onclick="switchItem3_1('question3_1')" > Yes
        </button>
        <button class="btn btn-info" id="no_question2" type="button" onclick="switchItem3_2('question3_2')"> No</button>
    </div>

    <!-- Question 3 -->
    <div class="question3 question" style="display: none" id="question3_1">
        <br>
        Are you or the person who is going to get tested in one of the situations below?<br><br>
        - Is 0 to 3 months old<br>
        - Is experiencing an obstruction of nasal passages other than normal congestion<br>
        - Is currently having a nosebleed episode<br>
        - Has had a nosebleed episode in the past week<br>
        - Has undergone any of the following types of surgery:<br>
        - Mouth surgery in the past week?<br>
        - Nose surgery in the past month (adult) OR<br>
        - Nose surgery in the past 3 weeks (child)<br>
        - Is currently wheezing
    </div>

    <div class="question3 question" style="display: none" id="question3_2">
        <br>
        Are you or the person who is going to get tested in one of the situations below?<br><br>
        - Is 0 to 3 months old<br>
        - Is experiencing an obstruction of nasal passages other than normal congestion<br>
        - Is currently having a nosebleed episode<br>
        - Has had a nosebleed episode in the past week<br>
        - Has undergone any of the following types of surgery:<br>
        - Mouth surgery in the past week?<br>
        - Nose surgery in the past month (adult) OR<br>
        - Nose surgery in the past 3 weeks (child)<br>
        - Is currently wheezing
    </div>

    <div class="question_choice " style="display: none" id="question3_answer">
        <button class="btn btn-info" id="yes_question3" type="button" onclick="switchItem4_1('question4_1')"> Yes</button>

        <button class="btn btn-info" id="no_question3" type="button" onclick="switchItem4_2('question4_2')"> No</button>
    </div>

    <!-- Question 4-->

    <div class="question4 question" style="display: none" id="question4">
        <br>
        Does your child have any 2 of the following symptoms?<br><br>
        - Stomach aches<br>
        - Nausea or vomiting<br>
        - Diarrhea<br>
        - Major fatigue<br>
        - Significant loss of appetite<br>
        - Generalized muscle pain (not related to physical exertion)<br>
        - Headache
    </div>

    <div class="question_choice" style="display: none" id="question4Choice">
        <button class="btn btn-info" id="yes_question4" type="button" onclick="switchItem5('question5')"> Yes</button>
        <button class="btn btn-info" id="no_question4" type="button" onclick="switchItem5('question5')"> No</button>
    </div>


    <!-- Question 5-->

    <div class="question5 question" style="display: none" id="question5">
        <br>
        Have you been in close contact with a confirmed or probable case of COVID-19?
    </div>

    <div class="question_choice" style="display: none" id="question5Choice">
        <button class="btn btn-info" id="yes_question5" type="button" onclick="switchItem6('question6')"> Yes</button>
        <button class="btn btn-info" id="no_question5" type="button" onclick="switchItem6('question6')"> No</button>
    </div>

    <!-- Question 6-->

    <div class="question6 question" style="display: none" id="question6">
        <br>
        Have you been tested for COVID-19?
    </div>

    <div class="question_choice" style="display: none" id="question6Choice">
        <button class="btn btn-info" id="yes_question6" type="button" onclick="switchItem7('question7')"> Yes</button>
        <button class="btn btn-info" id="no_question6" type="button" onclick="switchItem7('question7')"> No</button>
    </div>

    <!-- Question 7-->

    <div class="question6 question" style="display: none" id="question7">
        <br>
        Have you or someone close to you travelled outside of Canada within the last 14 days?
    </div>

    <div class="question_choice" style="display: none" id="question7Choice">
        <button class="btn btn-info" id="yes_question7" type="button" onclick="toSubmit('submit')"> Yes</button>
        <button class="btn btn-info" id="no_question7" type="button" onclick="toSubmit('submit')"> No</button>
    </div>


    <!-- Submit -->
    <a id="ntc" onclick="open_notice()" > * Notice </a>
    <button class="btn btn-info" id="submit" type="button" style="display: none" > Submit</button>

</div>

<div id="notice" class="notice" style="display: none">
    <br> <span style="text-align: center" id="success" > Self-assessment Notice </span> <br> <br> <br>
    <span class="notice_content"> Please notice: <br> <br></span>
    <span class="notice_content">1. The system only record your latest result. <br> <br></span>
     <span class="notice_content"> 2. You can re-submit your assessment questions.  <br> <br> </span>
    <button class="btn btn-info " id="closeNotice" type="button" > Close </button>
</div>



<!--Functions-->
<script>

    let result = [];
    let result_1 = [];
    let result_2 = [];
    let result_3 = [];
    let result_4 = [];
    let result_5 = [];
    let result_6 = [];
    let result_7 = [];


    function switchItem2_1(tag) {
        const question2_under5 = document.getElementById('question2_under5');
        const question2_above6 = document.getElementById('question2_above6');
        const question2_above18 = document.getElementById('question2_above18');
        const question2_answer = document.getElementById('question2_answer');
        if (tag == 'question2_under5') {
            question2_under5.style.display = '';
            question2_above6.style.display = 'none';
            question2_above18.style.display = 'none';
            question2_answer.style.display = '';
        }
        document.onclick=function() {
            let obj = event.srcElement;
            if(obj.id == "under5"){
                result_1.push('under 5 years');
            }
        }
    }

    function switchItem2_2(tag) {
        const question2_under5 = document.getElementById('question2_under5');
        const question2_above6 = document.getElementById('question2_above6');
        const question2_above18 = document.getElementById('question2_above18');
        const question2_answer = document.getElementById('question2_answer');
        if (tag == 'question2_above6') {
            question2_under5.style.display = 'none';
            question2_above6.style.display = '';
            question2_above18.style.display = 'none';
            question2_answer.style.display = '';
        }
        document.onclick=function() {
            let obj = event.srcElement;
            if(obj.id == "above6"){
                result_1.push('Between 6- 17 years');
            }
        }
    }

    function switchItem2_3(tag) {
        const question2_under5 = document.getElementById('question2_under5');
        const question2_above6 = document.getElementById('question2_above6');
        const question2_above18 = document.getElementById('question2_above18');
        const question2_answer = document.getElementById('question2_answer');
        if (tag == 'question2_above18') {
            question2_under5.style.display = 'none';
            question2_above6.style.display = 'none';
            question2_above18.style.display = '';
            question2_answer.style.display = '';
        }
        document.onclick=function() {
            let obj = event.srcElement;
            if(obj.id == "above18"){
                result_1.push('Above 18 years');
            }
        }
    }

    function switchItem3_1(tag) {
        const question3_answer = document.getElementById('question3_answer');
        const question3_1 = document.getElementById('question3_1');
        const question3_2 = document.getElementById('question3_2');
        if (tag == 'question3_1') {
            question3_1.style.display = '';
            question3_2.style.display = 'none';
            question3_answer.style.display = '';
        }
        document.onclick=function() {
            let obj = event.srcElement;
            if(obj.id == "yes_question2"){
                result_2.push('Yes');
            }
        }
    }

    function switchItem3_2(tag) {
        const question3_answer = document.getElementById('question3_answer');
        const question3_2 = document.getElementById('question3_2');
        const question3_1 = document.getElementById('question3_1');
        if (tag == 'question3_2') {
            question3_2.style.display = 'none';
            question3_1.style.display = '';
            question3_answer.style.display = '';
        }
        document.onclick=function() {
            let obj = event.srcElement;
            if(obj.id == "no_question2"){
                result_2.push('No');
            }
        }
    }

    function switchItem4_1(tag) {
        const question4 = document.getElementById('question4');
        const question4Choice = document.getElementById('question4Choice');
        if (tag == 'question4_1') {
            question4.style.display = '';
            question4Choice.style.display = '';
        }
        document.onclick=function() {
            let obj = event.srcElement;
            if(obj.id == "yes_question3"){
                result_3.push('Yes');
            }
        }
    }

    function switchItem4_2(tag) {
        const question4 = document.getElementById('question4');
        const question4Choice = document.getElementById('question4Choice');
        if (tag == 'question4_2') {
            question4.style.display = '';
            question4Choice.style.display = '';
        }
        document.onclick=function() {
            let obj = event.srcElement;
            if(obj.id == "no_question3"){
                result_3.push('No');
            }
        }
    }

    function switchItem5(tag) {
        const question5 = document.getElementById('question5');
        const question5Choice = document.getElementById('question5Choice');
        if (tag == 'question5' ) {
            question5.style.display = '';
            question5Choice.style.display = '';
        }
        document.onclick=function() {
            let obj = event.srcElement;
            if(obj.id == "yes_question4"){
                result_4.push('Yes');
            }
            if(obj.id == "no_question4"){
                result_4.push('No');
            }
        }
    }

    function switchItem6(tag) {
        const question6 = document.getElementById('question6');
        const question6Choice = document.getElementById('question6Choice');
        if (tag == 'question6' ) {
            question6.style.display = '';
            question6Choice.style.display = '';
        }
        document.onclick=function() {
            let obj = event.srcElement;
            if(obj.id == "yes_question5"){
                result_5.push('Yes');
            }
            if(obj.id == "no_question5"){
                result_5.push('No');
            }
        }
    }

    function switchItem7(tag) {
        const question7 = document.getElementById('question7');
        const question7Choice = document.getElementById('question7Choice');
        if (tag == 'question7' ) {
            question7.style.display = '';
            question7Choice.style.display = '';
        }
        document.onclick=function() {
            let obj = event.srcElement;
            if(obj.id == "yes_question6"){
                result_6.push('Yes');
            }
            if(obj.id == "no_question6"){
                result_6.push('No');
            }
        }
    }

    function toSubmit(tag) {
        const submit = document.getElementById('submit');
        if (tag == 'submit' ) {
            submit.style.display = '';
        }
        document.onclick=function() {
            let obj = event.srcElement;
            if(obj.id == "yes_question7"){
                result_7.push('Yes');
            }
            if(obj.id == "no_question7"){
                result_7.push('No');
            }
        }
    }


    $('#submit').click(function(){
        result.push(result_1[result_1.length-1]);
        result.push(result_2[result_2.length-1]);
        result.push(result_3[result_3.length-1]);
        result.push(result_4[result_4.length-1]);
        result.push(result_5[result_5.length-1]);
        result.push(result_6[result_6.length-1]);
        result.push(result_7[result_7.length-1]);

        $.ajax({
            url: "/selfAssessment",
            type:"POST",
            data:{params:JSON.stringify(result)},
            success:function(){
                $(window).attr("location","assessment")
            }
        });
    });

    $('#closeNotice').click(function(){
        const notice = document.getElementById('notice');
        notice.style.display='none';
    });

    function open_notice(){
        const notice = document.getElementById('notice');
        notice.style.display='block';
    }

    $("#question1Choice button").click(
        function() {
            $("#question1Choice button").eq($(this).index()).css('background', '#FC5531').siblings().css('background', '#5BC0DE');
        })
    $("#question2_answer button").click(
        function() {
            $("#question2_answer button").eq($(this).index()).css('background', '#FC5531').siblings().css('background', '#5BC0DE');
        })
    $("#question3_answer button").click(
        function() {
            $("#question3_answer button").eq($(this).index()).css('background', '#FC5531').siblings().css('background', '#5BC0DE');
        })
    $("#question4Choice button").click(
        function() {
            $("#question4Choice button").eq($(this).index()).css('background', '#FC5531').siblings().css('background', '#5BC0DE');
        })
    $("#question5Choice button").click(
        function() {
            $("#question5Choice button").eq($(this).index()).css('background', '#FC5531').siblings().css('background', '#5BC0DE');
        })
    $("#question6Choice button").click(
        function() {
            $("#question6Choice button").eq($(this).index()).css('background', '#FC5531').siblings().css('background', '#5BC0DE');
        })
    $("#question7Choice button").click(
        function() {
            $("#question7Choice button").eq($(this).index()).css('background', '#FC5531').siblings().css('background', '#5BC0DE');
        })



</script>

</body>

</html>